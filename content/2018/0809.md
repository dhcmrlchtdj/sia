+++
date = '2018-08-09'
title = 'webpack & gcc'
tags = ['fe', 'js']
+++

日常吐槽 JS/webpack 的时候，被反驳了。
“webpack 和 GCC 没什么区别啊，为什么喷 JS”。
一时语塞。构建打包这个问题之前考虑过，这次试着写下来。

---

按我的理解，GCC 对代码进行了编译和链接，而 webpack 进行的也是这些工作。从这个角度，二者确实是相似的。那么问题在哪里呢？

首先，作为静态类型的支持者，我认为 TS 是比 JS 更优秀的工具。编译的过程肯定是必要的，帮助我们更早发现潜在问题。
甚至可以说，我觉得目前的编译工具，能力上还弱了一些，不能方便地在编译期执行一些自定义的运算。

然后是链接的过程。
对 node 开发而言，链接是没有必要的。
在 web 端进行链接，是为了性能优化，减少请求数量。
不过，粒度较大的聚合，对用户端缓存是不利的。
在有了 HTTP2/PWA 等技术后，或许 web 端的链接过程也不再是一个必须操作。
此外，合并后文件较大，会导致压缩操作耗时增加。
如果不进行链接，不同文件可以并行压缩。不过链接过程中可以进行整体的 tree-shaking，可以减少文件体积。

结论，JS 领域需要构建，不一定需要链接，需要权衡的点会多一些。

---

编不下去了。
确实需要一款类似 webpack 的工具，来实现编译、链接这些操作。但 webpack 的使用体验，是比较糟糕的……下次再写吧。
