+++
date = '2018-08-24'
title = 'HTTPS 劫持'
tags = ['fe', 'https']
+++

最近碰到 HTTPS 资源被劫持的问题。
恶意脚本注入了 http://61.174.50.211:16100/jquery-1.0.0.1.js 。
这个 IP 出现在 easylist china 里，说明是惯犯了。
问题是，为什么 HTTPS 还会被劫持？

浏览器到 CDN 是HTTPS，看证书没有错误。
CDN 回源地址是 HTTPS，按说也不该出现问题。
不知道哪来的黑科技，全程加密还能劫持。

---

网上搜了一下，有人遇到遇到了类似问题。
《[我的CDN文件竟然被篡改了](https://luojia.me/2018/05/05/%E6%88%91%E7%9A%84cdn%E6%96%87%E4%BB%B6%E7%AB%9F%E7%84%B6%E8%A2%AB%E7%AF%A1%E6%94%B9%E4%BA%86/)》
CDN 的边缘节点从上级节点同步资源时被劫持，这个解释算是最符合表象的了。
不过，如果是 CDN 节点上的文件有误，那么问题复现的概率应该很高才对，但我碰到的劫持问题却难以复现。和 CDN 那边又隔了好几层合作方，不方便直接验证。

想象力不足，不知道还有没有其他解释。
